# TruestPrompt

PC Web ç«¯çš„ã€Œå¤§æ¨¡å‹è°ƒè¯•å°ã€ï¼Œç”¨åŒä¸€ä»½ User Prompt + Toolsï¼Œå¿«é€Ÿå¯¹æ¯”ä¸åŒæ¨¡å‹/ä¸åŒç³»ç»Ÿæç¤ºè¯çš„è¾“å‡ºä¸è€—æ—¶æŒ‡æ ‡ã€‚

## æ ¸å¿ƒç‰¹æ€§

- **å¤šæ¨¡å‹å¹¶è¡Œå¯¹æ¯”** - å¤š Slot æ§½ä½ç‹¬ç«‹è¿è¡Œï¼Œå¿«é€Ÿ A/B æµ‹è¯•
- **ç³»ç»Ÿæç¤ºè¯å¿«é€Ÿè¿­ä»£** - æ¯ä¸ª Slot ç‹¬ç«‹ System Promptï¼Œæ”¯æŒå¤åˆ¶/æ–°å¢/åˆ é™¤
- **å·¥å…·è°ƒç”¨å¯è§†åŒ–** - Tool Calls å±•ç¤ºã€å¯æŠ˜å ä»£ç å—ã€è¯­æ³•é«˜äº®
- **ä¸€é”®å¯¼å‡º cURL** - æ–¹ä¾¿è°ƒè¯•å’Œåˆ†äº«
- **æœ¬åœ°å†å²è¿½æº¯** - Star æ ‡è®°ã€æœç´¢ç­›é€‰ã€ä¸€é”®è½½å…¥å›æ”¾
- **é¡¹ç›®ç®¡ç†** - å¤šé¡¹ç›®å®Œå…¨éš”ç¦»ï¼Œç‹¬ç«‹çš„ Providerã€å†å²ã€é…ç½®

## æŠ€æœ¯æ ˆ

- Vue 3 + TypeScript + Vite
- Ant Design Vue - ä¼ä¸šçº§ UI ç»„ä»¶
- LangUI é£æ ¼ - AI å¯¹è¯æ°”æ³¡æ ·å¼
- pnpm åŒ…ç®¡ç†

## å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
pnpm install

# æœ¬åœ°å¼€å‘
pnpm dev

# æ„å»º
pnpm build

# è¿è¡Œæµ‹è¯•
pnpm test
```

## ç•Œé¢å¸ƒå±€

é‡‡ç”¨**é¡¶éƒ¨å·¥å…·æ é©±åŠ¨**çš„ç®€æ´å•æ å¸ƒå±€ï¼Œä¸»é¡µé¢ä¸“æ³¨äº Prompt è°ƒè¯•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”· TruestPrompt  [Project â–¼] â”‚ [Provider] [Params] [Tools] â”‚
â”‚                               â”‚ [Vars] [History] [ğŸŒ™]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ Prompt Composer                          [+ Add Msg]   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [user â–¼]  Hello, please help me with...        [ğŸ—‘ï¸]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  ğŸ° Slots Lab                               [+ Add Slot]   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ [Provider] [Model]  â”‚  â”‚ [Provider] [Model]  â”‚         â”‚
â”‚  â”‚ System Prompt...    â”‚  â”‚ System Prompt...    â”‚         â”‚
â”‚  â”‚ [â–¶ Run] [ğŸ“‹] [ğŸ—‘ï¸]  â”‚  â”‚ [â–¶ Run] [ğŸ“‹] [ğŸ—‘ï¸]  â”‚         â”‚
â”‚  â”‚ ğŸ’¬ Output bubble... â”‚  â”‚ ğŸ’¬ Output bubble... â”‚         â”‚
â”‚  â”‚ TTFB: 120ms         â”‚  â”‚ TTFB: 95ms          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŠŸèƒ½æ¨¡å—

### é¡¹ç›®ç®¡ç†

æ”¯æŒåˆ›å»ºå¤šä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®çš„æ•°æ®å®Œå…¨éš”ç¦»ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|-----|------|
| æ–°å»ºé¡¹ç›® | ç‚¹å‡»é¡¹ç›®ä¸‹æ‹‰æ¡† â†’ æ–°å»ºé¡¹ç›® |
| åˆ‡æ¢é¡¹ç›® | ä»ä¸‹æ‹‰æ¡†é€‰æ‹©ç›®æ ‡é¡¹ç›® |
| é‡å‘½å | æ‚¬åœé¡¹ç›®å â†’ ç‚¹å‡»ç¼–è¾‘å›¾æ ‡ |
| åˆ é™¤é¡¹ç›® | æ‚¬åœé¡¹ç›®å â†’ ç‚¹å‡»åˆ é™¤å›¾æ ‡ï¼ˆé»˜è®¤é¡¹ç›®ä¸å¯åˆ é™¤ï¼‰ |

**éš”ç¦»çš„æ•°æ®ï¼š**
- Provider é…ç½®ï¼ˆAPI Keyã€Base URLï¼‰
- ç¼–è¾‘å™¨çŠ¶æ€ï¼ˆSlotsã€Promptsã€Toolsã€Variablesï¼‰
- å†å²è®°å½•
- æ¨¡å‹ç¼“å­˜

**å…¨å±€å…±äº«ï¼š**
- ä¸»é¢˜åå¥½ï¼ˆæµ…è‰²/æ·±è‰²ï¼‰

### å·¥å…·æ 

| æŒ‰é’® | åŠŸèƒ½ |
|-----|------|
| Provider | ç®¡ç† API å¯†é’¥å’Œè¿æ¥é…ç½® |
| Params | é…ç½® temperatureã€top_pã€max_tokens |
| Tools | ç¼–è¾‘ Function Calling å·¥å…·å®šä¹‰ (JSON) |
| Vars | ç®¡ç†æ¨¡æ¿å˜é‡ `{{å˜é‡å}}` |
| History | æŸ¥çœ‹è¿è¡Œå†å²è®°å½• |
| ğŸŒ™ | åˆ‡æ¢æµ…è‰²/æ·±è‰²ä¸»é¢˜ |

### Prompt Composer

- å¤šæ¶ˆæ¯ç¼–è¾‘å™¨ï¼Œæ”¯æŒ user/system/assistant è§’è‰²
- å˜é‡è‡ªåŠ¨è¡¥å…¨ï¼ˆè¾“å…¥ `{{` è§¦å‘ï¼‰
- æ‹–æ‹½æ’åºæ¶ˆæ¯
- è‡ªåŠ¨ä¿å­˜åˆ° localStorage

### Slot å¡ç‰‡

- ç‹¬ç«‹é€‰æ‹© Provider å’Œ Model
- ç‹¬ç«‹ System Prompt ç¼–è¾‘
- ç‹¬ç«‹è¿è¡Œ/åœæ­¢
- å¤åˆ¶ Slot å¿«é€Ÿ A/B æµ‹è¯•
- å¯¼å‡º cURL å‘½ä»¤

### è¾“å‡ºå±•ç¤º

- LangUI é£æ ¼å¯¹è¯æ°”æ³¡
- æµå¼è¾“å‡º + æ‰“å­—å…‰æ ‡åŠ¨ç”»
- æŒ‡æ ‡å¾½ç« ï¼šTTFBã€æ€»è€—æ—¶ã€Token ç”¨é‡
- Tool Calls å¯æŠ˜å å±•ç¤º

## æ’ä»¶ç³»ç»Ÿ

å†…ç½®æ’ä»¶ï¼š
- OpenAI Compatible (Chat Completions)
- é˜¿é‡Œäº‘ DashScope
- Kimi (Moonshot)
- æ–¹èˆŸ Ark

> ğŸ’¡ æ¥å…¥æ–°æ¨¡å‹å‚å•†ï¼Ÿå‚è€ƒ [æ’ä»¶æ¥å…¥æŒ‡å—](docs/PLUGIN_INTEGRATION.md)

æ¯ä¸ªæ’ä»¶å®ç°ç»Ÿä¸€æ¥å£ï¼š
```typescript
interface Plugin {
  listModels(config) -> ModelInfo[]
  invokeChat(config, request, { stream }) -> Stream | Promise
  buildCurl(config, request) -> string
}
```

## æ•°æ®ç»“æ„

### Slotï¼ˆè°ƒè¯•æ§½ä½ï¼‰
```typescript
interface Slot {
  id: string
  providerProfileId: string | null
  pluginId: string
  modelId: string
  systemPrompt: string
  paramOverride: Record<string, unknown> | null
  status: 'idle' | 'running' | 'done' | 'error' | 'canceled'
  output: string
  toolCalls: ToolCall[] | null
  metrics: { ttfbMs, totalMs, tokens }
}
```

### Shared Stateï¼ˆå…¨å±€å…±äº«ï¼‰
```typescript
interface SharedState {
  userPrompts: UserPromptPreset[]
  toolsDefinition: string
  variables: Variable[]
  defaultParams: { temperature, top_p, max_tokens }
}
```

### History Itemï¼ˆå†å²è®°å½•ï¼‰
```typescript
interface HistoryItem {
  id: string
  createdAt: number
  star: boolean
  title: string
  providerProfileSnapshot: ProviderProfile
  requestSnapshot: { systemPrompt, userPrompt, tools, params, modelId }
  responseSnapshot: { outputText, toolCalls, usage, metrics }
}
```

## é”®ç›˜å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|-------|------|
| `Ctrl + .` | åœæ­¢æ‰€æœ‰è¿è¡Œä¸­çš„ Slot |
| `Escape` | å…³é—­å½“å‰æ¨¡æ€æ¡† |
| `Tab` | ç„¦ç‚¹å¯¼èˆª |

## å­˜å‚¨è¯´æ˜

- **Provider é…ç½®** - localStorageï¼ˆæŒ‰é¡¹ç›®éš”ç¦»ï¼Œå« API Keyï¼Œæ³¨æ„å®‰å…¨é£é™©ï¼‰
- **ç¼–è¾‘å™¨çŠ¶æ€** - localStorageï¼ˆæŒ‰é¡¹ç›®éš”ç¦»ï¼‰
- **å†å²è®°å½•** - IndexedDBï¼ˆæŒ‰é¡¹ç›®éš”ç¦»ï¼‰
- **æ¨¡å‹ç¼“å­˜** - IndexedDBï¼ˆæŒ‰é¡¹ç›®éš”ç¦»ï¼‰
- **ä¸»é¢˜åå¥½** - localStorageï¼ˆå…¨å±€å…±äº«ï¼‰
- **é¡¹ç›®åˆ—è¡¨** - localStorageï¼ˆå…¨å±€ï¼‰

âš ï¸ API Key å­˜å‚¨åœ¨ localStorage æœ‰è¢«åŒåŸŸè„šæœ¬è¯»å–çš„é£é™©ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚æä¾›ä¸€é”®æ¸…ç©ºå¯†é’¥åŠŸèƒ½ã€‚

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AppToolbar.vue
â”‚   â”‚   â”œâ”€â”€ MainWorkspace.vue
â”‚   â”‚   â””â”€â”€ ProjectSelector.vue
â”‚   â”œâ”€â”€ prompt/          # Prompt ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ PromptComposer.vue
â”‚   â”‚   â””â”€â”€ MessageItem.vue
â”‚   â”œâ”€â”€ slots/           # Slot å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ SlotsGrid.vue
â”‚   â”‚   â”œâ”€â”€ SlotCard.vue
â”‚   â”‚   â””â”€â”€ OutputBubble.vue
â”‚   â”œâ”€â”€ modals/          # æ¨¡æ€æ¡†
â”‚   â”‚   â”œâ”€â”€ ProviderModal.vue
â”‚   â”‚   â”œâ”€â”€ ParamsModal.vue
â”‚   â”‚   â”œâ”€â”€ ToolsModal.vue
â”‚   â”‚   â””â”€â”€ VarsModal.vue
â”‚   â””â”€â”€ drawers/         # æŠ½å±‰
â”‚       â””â”€â”€ HistoryDrawer.vue
â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â””â”€â”€ useProjectManager.ts
â”œâ”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ theme.css        # ä¸»é¢˜å˜é‡
â”‚   â”œâ”€â”€ animations.css   # åŠ¨ç”»å®šä¹‰
â”‚   â””â”€â”€ langui.css       # LangUI é£æ ¼
â””â”€â”€ lib/                 # å·¥å…·åº“
    â””â”€â”€ storage.ts       # é¡¹ç›®éš”ç¦»å­˜å‚¨æœåŠ¡
```

## è®¾è®¡è§„èŒƒ

### åŠ¨ç”»æ—¶é•¿
- å¿«é€Ÿï¼š150msï¼ˆæŒ‰é’®ç‚¹å‡»ï¼‰
- æ­£å¸¸ï¼š200msï¼ˆæ¨¡æ€æ¡†ï¼‰
- æ…¢é€Ÿï¼š300msï¼ˆä¸»é¢˜åˆ‡æ¢ã€æŠ½å±‰ï¼‰

### é¢œè‰²ç³»ç»Ÿ
- å¯¹è¯æ°”æ³¡é‡‡ç”¨ LangUI é£æ ¼
- è¡¨å•ç»„ä»¶é‡‡ç”¨ Ant Design Vue è®¾è®¡è¯­è¨€
- æ”¯æŒæµ…è‰²/æ·±è‰²ä¸»é¢˜ï¼Œæ»¡è¶³ WCAG AA å¯¹æ¯”åº¦æ ‡å‡†

## éç›®æ ‡

æ˜ç¡®è¾¹ç•Œï¼Œé¿å…åŠŸèƒ½è†¨èƒ€ï¼š
- âŒ è´¦å·ä½“ç³»
- âŒ äº‘ç«¯å­˜å‚¨
- âŒ å¤šäººåä½œ
- âŒ æœåŠ¡ç«¯ä»£ç†

## License

MIT
